<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.0.0">
  <bpmn:process id="HotelReservationProcess" name="Hotel Reservation Process" isExecutable="true">
    
    <bpmn:startEvent id="StartEvent_1" name="Start">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    
    <bpmn:serviceTask id="Task_Validate" name="Validate Input">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="validate-input" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <bpmn:serviceTask id="Task_SearchClient" name="Search Client">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="search-client" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:outgoing>Flow_3</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="Gateway_Client" name="Client Found?">
      <bpmn:incoming>Flow_3</bpmn:incoming>
      <bpmn:outgoing>Flow_ClientYes</bpmn:outgoing>
      <bpmn:outgoing>Flow_ClientNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:serviceTask id="Task_CreateClient" name="Create Client">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="create-client" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_ClientNo</bpmn:incoming>
      <bpmn:outgoing>Flow_ClientCreated</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="Gateway_MergeClient">
      <bpmn:incoming>Flow_ClientYes</bpmn:incoming>
      <bpmn:incoming>Flow_ClientCreated</bpmn:incoming>
      <bpmn:outgoing>Flow_4</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:serviceTask id="Task_CheckRoom" name="Check Availability">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="check-room-availability" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_4</bpmn:incoming>
      <bpmn:outgoing>Flow_5</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="Gateway_Room" name="Room Available?">
      <bpmn:incoming>Flow_5</bpmn:incoming>
      <bpmn:outgoing>Flow_RoomYes</bpmn:outgoing>
      <bpmn:outgoing>Flow_RoomNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:serviceTask id="Task_BlockRoom" name="Block Room">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="block-room" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_RoomYes</bpmn:incoming>
      <bpmn:outgoing>Flow_6</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_CreateBooking" name="Create Booking">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="create-booking" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_6</bpmn:incoming>
      <bpmn:outgoing>Flow_End</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:endEvent id="EndEvent_Success" name="Completed">
      <bpmn:incoming>Flow_End</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:endEvent id="EndEvent_Rejected" name="Rejected">
      <bpmn:incoming>Flow_RoomNo</bpmn:incoming>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_Validate" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_Validate" targetRef="Task_SearchClient" />
    <bpmn:sequenceFlow id="Flow_3" sourceRef="Task_SearchClient" targetRef="Gateway_Client" />
    
    <bpmn:sequenceFlow id="Flow_ClientYes" name="Yes" sourceRef="Gateway_Client" targetRef="Gateway_MergeClient">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=clientFound = true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    
    <bpmn:sequenceFlow id="Flow_ClientNo" name="No" sourceRef="Gateway_Client" targetRef="Task_CreateClient">
       <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=clientFound = false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>

    <bpmn:sequenceFlow id="Flow_ClientCreated" sourceRef="Task_CreateClient" targetRef="Gateway_MergeClient" />
    <bpmn:sequenceFlow id="Flow_4" sourceRef="Gateway_MergeClient" targetRef="Task_CheckRoom" />
    <bpmn:sequenceFlow id="Flow_5" sourceRef="Task_CheckRoom" targetRef="Gateway_Room" />

    <bpmn:sequenceFlow id="Flow_RoomYes" name="Yes" sourceRef="Gateway_Room" targetRef="Task_BlockRoom">
       <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=roomAvailable = true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    
    <bpmn:sequenceFlow id="Flow_RoomNo" name="No" sourceRef="Gateway_Room" targetRef="EndEvent_Rejected">
       <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=roomAvailable = false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>

    <bpmn:sequenceFlow id="Flow_6" sourceRef="Task_BlockRoom" targetRef="Task_CreateBooking" />
    <bpmn:sequenceFlow id="Flow_End" sourceRef="Task_CreateBooking" targetRef="EndEvent_Success" />

  </bpmn:process>

  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="HotelReservationProcess">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Validate_di" bpmnElement="Task_Validate">
        <dc:Bounds x="240" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SearchClient_di" bpmnElement="Task_SearchClient">
        <dc:Bounds x="390" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Client_di" bpmnElement="Gateway_Client" isMarkerVisible="true">
        <dc:Bounds x="545" y="95" width="50" height="50" />
        <bpmndi:BPMNLabel><dc:Bounds x="536" y="71" width="69" height="14" /></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CreateClient_di" bpmnElement="Task_CreateClient">
        <dc:Bounds x="650" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_MergeClient_di" bpmnElement="Gateway_MergeClient" isMarkerVisible="true">
        <dc:Bounds x="795" y="95" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CheckRoom_di" bpmnElement="Task_CheckRoom">
        <dc:Bounds x="890" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Room_di" bpmnElement="Gateway_Room" isMarkerVisible="true">
        <dc:Bounds x="1045" y="95" width="50" height="50" />
        <bpmndi:BPMNLabel><dc:Bounds x="1028" y="71" width="84" height="14" /></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_BlockRoom_di" bpmnElement="Task_BlockRoom">
        <dc:Bounds x="1150" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CreateBooking_di" bpmnElement="Task_CreateBooking">
        <dc:Bounds x="1300" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_Success_di" bpmnElement="EndEvent_Success">
        <dc:Bounds x="1462" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_Rejected_di" bpmnElement="EndEvent_Rejected">
        <dc:Bounds x="1162" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1"><di:waypoint x="188" y="120" /><di:waypoint x="240" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2"><di:waypoint x="340" y="120" /><di:waypoint x="390" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_3_di" bpmnElement="Flow_3"><di:waypoint x="490" y="120" /><di:waypoint x="545" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ClientYes_di" bpmnElement="Flow_ClientYes"><di:waypoint x="595" y="120" /><di:waypoint x="795" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ClientNo_di" bpmnElement="Flow_ClientNo"><di:waypoint x="570" y="145" /><di:waypoint x="570" y="240" /><di:waypoint x="650" y="240" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ClientCreated_di" bpmnElement="Flow_ClientCreated"><di:waypoint x="750" y="240" /><di:waypoint x="820" y="240" /><di:waypoint x="820" y="145" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_4_di" bpmnElement="Flow_4"><di:waypoint x="845" y="120" /><di:waypoint x="890" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_5_di" bpmnElement="Flow_5"><di:waypoint x="990" y="120" /><di:waypoint x="1045" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_RoomYes_di" bpmnElement="Flow_RoomYes"><di:waypoint x="1095" y="120" /><di:waypoint x="1150" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_RoomNo_di" bpmnElement="Flow_RoomNo"><di:waypoint x="1070" y="145" /><di:waypoint x="1070" y="240" /><di:waypoint x="1162" y="240" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_6_di" bpmnElement="Flow_6"><di:waypoint x="1250" y="120" /><di:waypoint x="1300" y="120" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_End_di" bpmnElement="Flow_End"><di:waypoint x="1400" y="120" /><di:waypoint x="1462" y="120" /></bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>